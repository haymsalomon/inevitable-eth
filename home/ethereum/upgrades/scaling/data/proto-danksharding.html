<!--
title: Proto-Danksharding
description: 
published: true
date: 2022-12-07T17:03:39.467Z
tags: 
editor: ckeditor
dateCreated: 2022-12-07T17:03:36.818Z
-->

<figure class="image"><img src="/proto-danksharding-3.jpeg">
  <figcaption><a href="https://mirror.xyz/hirokennelly.eth/W2nwcAMquPIdpPg1nbdKCr1D3lS4_MPquQZ4VwSqUuM"><i>source</i></a></figcaption>
</figure>
<h1 style="text-align:center;">EIP 4844: Proto-Danksharding</h1>
<h2>The World Computer</h2>
<p>Ethereum exists between a network of 1,000s of computers (<a href="https://inevitableeth.com/home/ethereum/network/node">nodes</a>), each running a local version of the <a href="https://inevitableeth.com/home/ethereum/evm">Ethereum Virtual Machine</a> (EVM). All copies of the EVM are kept perfectly in sync.&nbsp;</p>
<p>Any individual EVM is a window into the shared state of the <a href="https://inevitableeth.com/home/ethereum/world-computer">World Computer</a>.</p>
<p>Today the computer is... primitive. Execution is slow, <a href="/home/concepts/gas">gas</a> costs are outrageous and user experience is terrible.&nbsp;</p>
<p>What's worse: the more people use it the worse it gets.&nbsp;</p>
<p>Fear not... upgrades are coming!</p>
<h2>Scalability Trilemma</h2>
<figure class="image"><img src="/proto-danksharding-2.webp">
  <figcaption><a href="https://medium.com/logos-network/everything-you-know-about-the-scalability-trilemma-is-probably-wrong-bc4f4b7a7ef"><i>source</i></a></figcaption>
</figure>
<p>Before we discuss Ethereum's roadmap, we need to understand the challenges of blockchain scaling.</p>
<p>Summarized by the Scalability Paradox, it is (seemingly) impossible to remain decentralized, secure and scalable; optimizing for one compromises the other two.</p>
<p>But thanks to the world class researchers and devs at the Ethereum Foundation, we have a solution; the Scalability Paradox has been reduced to the Scalability Trilemma!&nbsp;</p>
<p>Here's how it'll be done:</p>
<h2>The Merge</h2>
<p>The first major upgrade has already happened: Ethereum will be switching its <a href="/home/ethereum/network/consensus">consensus system</a> from Proof of Work to <a href="/home/ethereum/network/consensus/pos">Proof of Stake</a>.</p>
<p>Instead of being secured by the computing power of the computers (minders) supporting it, The World Computer is secured by the economic value of ETH.</p>
<p>With Proof of Work, the system required top-of-the-line computers; now anyone with a home computer will be able to participate in the Ethereum network.</p>
<p>The Merge was &nbsp;a leap forward for decentralization, allowing large scale participation and removing the economies of scale factor.</p>
<p>This provides a network with <a href="/home/concepts/credible-neutrality">credible neutrality</a>, where everyone plays by the same rules.&nbsp;</p>
<p>No centralized player can change the rules to pick winners and losers. No personal conflict can spill over into the rules of the network.&nbsp;</p>
<p>One computer, supported by &gt;10k nodes.</p>
<h2>Scaling Execution</h2>
<p><a href="/home/ethereum/upgrades/scaling/execution">Deep Dive: Scaling Execution</a></p>
<p>The problem: as Ethereum/the EVM becomes more simple, its capabilities/speed stop improving.&nbsp;</p>
<p>The solution: move the execution environment off-chain.&nbsp;</p>
<p>The Ethereum blockchain will always be the settlement layer of The World Computer, but execution will migrate to layer 2. <a href="https://polynya.medium.com/understanding-ethereums-rollup-centric-roadmap-1c60d30c060f">Rollups will focus on execution, users will interact with rollups</a>.&nbsp;</p>
<p>Proof-of-stake will make Ethereum the most secure and decentralized consensus layer for rollups while all the difficult stuff moves off-chain, to the powerful computers.&nbsp;</p>
<p>Today, we already have rollups. Between chains like Arbitrum and ZKSync, billions of dollars of TVL have been moved to layer 2.</p>
<p>But this is just the beginning! Ethereum is currently general purpose, now its time to build to the rollup-roadmap.</p>
<h2>Data Availability</h2>
<p><a href="/home/ethereum/upgrades/scaling/data/data-availability-bottleneck">Deep Dive: Data Availability Bottleneck</a></p>
<p>The EVM is the virtual computing environment in which all of Etherum exists and all <a href="/home/ethereum/blockchain/transaction">transactions</a> happen.</p>
<p>After compressing a bundle of transactions, a rollup loads it into the EVM and commits it to the Ethereum blockchain.</p>
<p>From a function standpoint, we only care that the compressed bundle is committed to the blockchain (settlement).&nbsp;</p>
<p>We can build tools to decompress the bundle into a readable format and/or move the data off-chain, but we don't need the EVM to be able to access it.</p>
<p>Today, the EVM treats a bundle exactly the same as core programatic variables... and the gas fee market reflects that.</p>
<p>A rollup must pay a relatively large amount of ETH to commit a bundle, even though the bundle's contents are irrelevant to the operation of the EVM.</p>
<h2>EIP-4844: Proto-Danksharding</h2>
<p>Which brings us to <a href="https://eips.ethereum.org/EIPS/eip-4844">EIP-4844: Proto-Danksharding</a>. (Fun fact: Danksharding is named after researcher <a href="https://twitter.com/dankrad">Dankrad Feist</a>. Proto-Danksharding is an upgrade recommended by researcher <a href="https://twitter.com/protolambda">protolamda</a>, hence Proto-Danksharding).&nbsp;</p>
<p>The technicals are out of scope of this thread, but we are going to talk big picture. EIP-4844 brings important changes to Ethereum's base layer that fundamentally reorients the system towards the rollup-centric future.</p>
<p>Today, rollups post into a field called "calldata," storage which persists on-chain forever. <a href="/home/ethereum/blockchain/transaction">You can see this data within a transaction</a>.&nbsp;</p>
<p>Under EIP-4844 rollups will be able to post bundles under a new transaction type.&nbsp;</p>
<p>This transaction will carry a blob, a large amount of data - inaccessible by the EVM - which is much cheaper than calldata.</p>
<p>Blobs are 10x larger than blocks, but they are pruned out of the blockchain after ~a month.&nbsp;</p>
<p>A new data-availability layer will arise, and the scalability of the system increases by an order of magnitude.&nbsp;</p>
<h2>A Dedicated Gas Market</h2>
<p>EIP-4844 also creates a separate fee market for these transactions.</p>
<p>The result will be a tailored data layer – regular transactions and blobs will get distinct fee markets with independent gas prices.&nbsp;</p>
<p>So even if some NFT project is blowing up gas fees or arb bots are desperately chasing a huge liquidation, your rollup data costs won’t go up (though settlement costs would).</p>
<h2>Summary</h2>
<p>Proto-Danksharding is an upgrade critical to the <a href="https://vitalik.ca/general/2021/12/06/endgame.html">Ethereum endgame</a>.&nbsp;</p>
<p>The most important thing to understand is that Ethereum will scale by offloading execution to high performance (possibly centralized) chains while retaining decentralized settlement.</p>
<p>Rollups will still generate data, in fact far more data than Ethereum can economically hold.</p>
<p>The solution:&nbsp;</p>
<ul>
  <li>create more space for rollups</li>
  <li>decouple the market for EVM code and rollup settlement data</li>
</ul>
<h2>Resources</h2>
<p>Source Material - <a href="https://twitter.com/SalomonCrypto/status/1559402384526258176">Twitter Link</a></p>
<p>Source Material - <a href="/twitter-pdf-2022-08-16_proto-danksharding.pdf">PDF</a></p>
